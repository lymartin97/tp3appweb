(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],l=0,f=[];l<o.length;l++)s=o[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},i=[];function s(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"40ab5f32"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=s(e);var u=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(l);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",u.name="ChunkLoadError",u.type=n,u.request=i,r[1](u)}a[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/tp3appweb/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var p=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0127":function(e,t,r){},"034f":function(e,t,r){"use strict";r("0127")},"45c6":function(e,t,r){"use strict";(function(e){r("063a"),r("e2c0"),r("bcee"),r("e4bd"),r("b900");function n(t){var r=t.split(".")[1],n=e.from(r,"base64");return JSON.parse(n.toString())}function a(e){return n(e).exp}function i(e){return n(e).sub}function s(e){var t=n(e).exp;return!(Date.now()>=1e3*t)}t["a"]={decrypt:n,isAlive:s,getUserId:i,getExpiration:a}}).call(this,r("257d").Buffer)},"56d7":function(e,t,r){"use strict";r.r(t);r("5675"),r("58c3"),r("59f3"),r("3e3e");var n=r("d04a"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/"}},[e._v("Sentiers")])],1),r("router-view")],1)},i=[],s=(r("034f"),r("bdd7")),o={},c=Object(s["a"])(o,a,i,!1,null,null,null),u=c.exports,l=(r("bcee"),r("a8a2"),r("f86c"),r("dc3b")),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("b-tabs",{attrs:{pills:"","content-class":"mt-3",align:"right"}},[r("b-tab",{attrs:{title:"Sentiers",active:""}},[r("Trails")],1),e.isLoggedIn?r("div",[r("b-tab",{attrs:{title:"Se Déconnecter"},on:{click:e.logout}})],1):r("div",{},[r("b-tab",{attrs:{title:"Se Connecter"}},[r("Login")],1),r("b-tab",{attrs:{title:"S'inscrire"}},[r("Register")],1)],1)],1)],1)},f=[],m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex"},[r("b-container",[r("b-row",[r("b-col",{attrs:{"align-self":"baseline"}},[r("div",{staticClass:"pt-3 pb-3"},[r("b-form-select",{staticClass:"w-200 parksListSelect",model:{value:e.selectedPark,callback:function(t){e.selectedPark=t},expression:"selectedPark"}},[r("b-form-select-option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Choisissez un parc")]),e._l(e.parkList,(function(t){return r("b-form-select-option",{key:t.id,attrs:{value:t}},[e._v(e._s(t.name))])}))],2)],1),e.trailList.length?r("b-form-select",{staticClass:"trailsListSelect",model:{value:e.selectedTrail,callback:function(t){e.selectedTrail=t},expression:"selectedTrail"}},e._l(e.trailList,(function(t){return r("b-form-select-option",{key:t.id,attrs:{variant:"primary",value:t}},[e._v(" "+e._s(t.name))])})),1):e._e()],1),""!=e.selectedTrail?r("Like",{ref:"likes"}):e._e(),r("Map")],1)],1)],1)},d=[],h=r("c452"),g=(r("833b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"text-white bg-success"},[e._v(e._s(e.trailName))]),r("l-map",{staticStyle:{height:"600px",width:"920px"},attrs:{zoom:e.zoom,center:e.center}},[r("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),r("l-marker",{attrs:{"lat-lng":e.markerLatLng}}),e._l(e.segments,(function(t){return r("l-polyline",{key:t,attrs:{"lat-lngs":t.coordinates,color:e.setColor(t.level)}})}))],2)],1)}),v=[],b=(r("e687"),r("608b")),k=r("e0fd"),w=r("7390"),x=r("5976"),L={components:{LMap:b["a"],LTileLayer:k["a"],LMarker:w["a"],LPolyline:x["a"]},data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:15}},computed:{segments:function(){return this.$store.state.trails.segments},center:function(){return 0!==this.$store.state.trails.segments.length?this.$store.state.trails.segments[0].coordinates[0]:[46.71,-71.292]},markerLatLng:function(){return 0!==this.$store.state.trails.segments.length?this.$store.state.trails.segments[0].coordinates[0]:[46.71,-71.292]},trailName:function(){return this.$store.state.trails.selectedTrail.name}},methods:{setColor:function(e){return"Très difficile"===e?"red":"Difficile"===e?"orange":"Intermédiaire"===e?"blue":"Facile"===e?"green":"black"}}},y=L,T=Object(s["a"])(y,g,v,!1,null,"16e5efe2",null),O=T.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.liked?r("b-button",{staticClass:"mb-2",attrs:{size:"lg",variant:"light"},on:{click:e.dislikeTrail}},[r("b-icon",{attrs:{icon:"heart-fill",variant:"danger"}})],1):e._e(),e.liked?e._e():r("b-button",{staticClass:"mb-2",attrs:{size:"lg",variant:"light"},on:{click:e.likeTrail}},[r("b-icon",{attrs:{icon:"heart",variant:"danger"}})],1),r("p",{staticStyle:{"background-color":"pink"}},[e._v(e._s(e.likesCount))])],1)},j=[],_={computed:{likesCount:function(){return this.$store.state.trails.likesCount},liked:function(){return!!this.isLoggedIn&&this.$store.getters["trails/getAlreadyLiked"]},isLoggedIn:function(){return this.$store.getters["authentication/isLoggedIn"]}},methods:{likeTrail:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isLoggedIn){t.next=8;break}return e.liked=!0,t.next=4,e.$store.dispatch("trails/postTrailLikesAction");case 4:return t.next=6,e.getLikes();case 6:t.next=9;break;case 8:e.$router.push({name:"Login"});case 9:case"end":return t.stop()}}),t)})))()},dislikeTrail:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isLoggedIn){t.next=6;break}return e.liked=!1,t.next=4,e.$store.dispatch("trails/deleteTrailLikeAction");case 4:return t.next=6,e.getLikes();case 6:case"end":return t.stop()}}),t)})))()},getLikes:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.$store.state.trails.selectedTrail){t.next=4;break}return e.isLoggedIn&&(r=e.$store.getters["authentication/getTokenUserId"],e.$store.commit("trails/setUserId",r)),t.next=4,e.$store.dispatch("trails/getTrailLikesAction");case 4:case"end":return t.stop()}}),t)})))()}}},E=_,S=Object(s["a"])(E,R,j,!1,null,"31fecc0c",null),$=S.exports,I={data:function(){return{parkList:[],trailList:[],selectedPark:"",selectedTrail:""}},components:{Map:O,Like:$},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadParks();case 2:case"end":return t.stop()}}),t)})))()},methods:{loadParks:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("trails/getAllParksAction");case 2:e.parkList=e.$store.state.trails.parks;case 3:case"end":return t.stop()}}),t)})))()},loadTrailsFromSelectedPark:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("trails/getTrailsFromParkAction",e.selectedPark);case 2:e.trailList=e.$store.state.trails.trails;case 3:case"end":return t.stop()}}),t)})))()},setSelectedTrail:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("trails/setSelectedTrail",e.selectedTrail),t.next=3,e.$store.dispatch("trails/getTrailSegmentsAction");case 3:case"end":return t.stop()}}),t)})))()}},watch:{selectedPark:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadTrailsFromSelectedPark();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectedTrail:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setSelectedTrail();case 2:return e.next=4,this.$refs.likes.getLikes();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},P=I,A=Object(s["a"])(P,m,d,!1,null,"b777f8b8",null),C=A.exports,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[r("h1",[e._v("Connexion")]),r("label",[e._v("Courriel")]),r("b-form-input",{attrs:{required:"",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("label",[e._v("Mot de passe")]),r("b-form-input",{attrs:{required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("b-button",{staticClass:"mt-4",attrs:{variant:"primary",type:"submit"}},[e._v("Se connecter")])],1),e.authServiceError?r("div",[e._v(e._s(e.authServiceError))]):e._e()],1)],1)},U=[],M={created:function(){this.$store.commit("authentication/clearError")},data:function(){return{email:"",password:""}},methods:{login:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.authServiceError){t.next=4;break}return t.next=3,e.$store.dispatch("authentication/login",{email:e.email,password:e.password});case 3:e.$router.push({name:"Home"});case 4:case"end":return t.stop()}}),t)})))()}},computed:{authServiceError:function(){return this.$store.state.authentication.authServiceError}}},q=M,D=Object(s["a"])(q,z,U,!1,null,null,null),F=D.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[r("h1",[e._v("Créer un compte")]),r("label",[e._v("Courriel")]),r("b-form-input",{attrs:{required:"",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("label",[e._v("Nom d'utilisateur")]),r("b-form-input",{attrs:{required:"",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("label",[e._v("Mot de passe")]),r("b-form-input",{attrs:{required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("b-button",{staticClass:"mt-4",attrs:{type:"submit",variant:"primary"}},[e._v("Créer le compte")])],1),e.authServiceError?r("div",[e._v(e._s(e.authServiceError))]):e._e()],1)],1)},B=[],H={created:function(){this.$store.commit("authentication/clearError")},data:function(){return{email:"",name:"",password:""}},methods:{register:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.authServiceError){t.next=4;break}return t.next=3,e.$store.dispatch("authentication/register",{email:e.email,name:e.name,password:e.password});case 3:e.$router.push({name:"Home"});case 4:case"end":return t.stop()}}),t)})))()}},computed:{authServiceError:function(){return this.$store.state.authentication.authServiceError}}},J=H,G=Object(s["a"])(J,N,B,!1,null,null,null),K=G.exports,Q={name:"Home",props:{msg:String},components:{Login:F,Register:K,Trails:C},computed:{isLoggedIn:function(){return this.$store.getters["authentication/isLoggedIn"]}},methods:{logout:function(){this.$store.dispatch("authentication/logout"),this.$router.push({name:"Login"})}}},V=Q,W=(r("e3ca"),Object(s["a"])(V,p,f,!1,null,"130802df",null)),X=W.exports,Y=r("6c71"),Z="https://tp3-api.herokuapp.com",ee=r("8aad"),te=r.n(ee),re=r("5a19"),ne=r("5d80"),ae=r("7946"),ie=r("a927"),se=r("e0e0"),oe=(r("bfa3"),function(e){Object(ae["a"])(r,e);var t=Object(ie["a"])(r);function r(e,n,a){var i;return Object(ne["a"])(this,r),i=t.call(this,e),i.codeText=n,i.code=a,i}return Object(re["a"])(r)}(Object(se["a"])(Error)));function ce(e){if(ue(e)){var t=new oe("Erreur avec le réseau. Impossible de communiquer avec le serveur.");return t}var r=new oe(e.response.data,e.response.statusText,e.response.status);return r}function ue(e){return!!e.isAxiosError&&!e.response}function le(e){return pe.apply(this,arguments)}function pe(){return pe=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.post("".concat(Z,"/login"),{email:t.email,password:t.password});case 3:return r=e.sent,n=r.data.accessToken,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),ce(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),pe.apply(this,arguments)}function fe(e){return me.apply(this,arguments)}function me(){return me=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.post("".concat(Z,"/register"),{email:t.email,password:t.password,name:t.name});case 3:return r=e.sent,n=r.data.accessToken,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),ce(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),me.apply(this,arguments)}var de={getToken:le,registerNewUser:fe},he=r("45c6"),ge={token:"",authServiceError:""},ve={isLoggedIn:function(e){return!!e.token},getTokenUserId:function(e){var t=he["a"].getUserId(e.token);return t}},be={clearError:function(e){e.authServiceError=""},initializeAuthentication:function(e,t){e.token=t,e.authServiceError=""},logout:function(e){e.token=""},setAuthServiceError:function(e,t){e.authServiceError=t}},ke={login:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,de.getToken(t);case 4:a=r.sent,n("initializeAuthentication",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setAuthServiceError",r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},logout:function(e){var t=e.commit;t("logout")},register:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,de.registerNewUser(t);case 4:a=r.sent,n("initializeAuthentication",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setAuthServiceError",r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()}},we={namespaced:!0,state:ge,actions:ke,mutations:be,getters:ve},xe=(r("351c"),te.a.create({}));xe.interceptors.request.use((function(e){return We.getters["authentication/isLoggedIn"]&&(e.headers.authorization="Bearer ".concat(We.state.authentication.token)),e}));var Le=xe;function ye(e){return Te.apply(this,arguments)}function Te(){return Te=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le.get("".concat(Z,"/users/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),ce(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Te.apply(this,arguments)}var Oe={getUserById:ye},Re={email:"",name:"",onError:!1},je={},_e={initializeProfile:function(e,t){e.email=t.email,e.name=t.name,e.onError=!1},setOnError:function(e){e.onError=!0}},Ee={getProfile:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.rootGetters,t.prev=1,a=n["authentication/getTokenUserId"],t.next=5,Oe.getUserById(a);case 5:i=t.sent,r("initializeProfile",i),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),r("setOnError");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},Se={namespaced:!0,state:Re,actions:Ee,mutations:_e,getters:je},$e=r("b463");function Ie(){return Pe.apply(this,arguments)}function Pe(){return Pe=Object(h["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("".concat(Z,"/parks"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e["catch"](0),ce(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Pe.apply(this,arguments)}function Ae(e){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("".concat(Z,"/trails?parkId=").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),ce(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Ce.apply(this,arguments)}function ze(e){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("".concat(Z,"/segments/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),ce(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Ue.apply(this,arguments)}function Me(e){return qe.apply(this,arguments)}function qe(){return qe=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.a.get("".concat(Z,"/trails/").concat(t,"/likes"));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),ce(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),qe.apply(this,arguments)}function De(e,t){return Fe.apply(this,arguments)}function Fe(){return Fe=Object(h["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le.post("".concat(Z,"/likes"),{trailId:t,userId:r});case 3:return n=e.sent,console.log(n),e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e["catch"](0),ce(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),Fe.apply(this,arguments)}function Ne(e){return Be.apply(this,arguments)}function Be(){return Be=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le.delete("".concat(Z,"/likes/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),ce(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Be.apply(this,arguments)}var He={getParksList:Ie,getTrailsFromPark:Ae,getTrailSegment:ze,getTrailLikes:Me,postTrailLike:De,deleteTrailLike:Ne},Je={parks:[],trails:[],onError:!1,selectedTrail:"",segments:[],trailLikesList:[],likesCount:0,userId:null},Ge={getAlreadyLiked:function(e){for(var t=e.trailLikesList,r=0;r<t.length;r++)if(t[r].userId===e.userId)return!0;return!1}},Ke={initializeParks:function(e,t){e.parks=t},initializeTrails:function(e,t){e.trails=t},setOnError:function(e){e.onError=!0},setSelectedTrail:function(e,t){e.selectedTrail=t},setSegments:function(e,t){e.segments=t},setLikesList:function(e,t){e.trailLikesList=t},setLikesCount:function(e){e.likesCount=e.trailLikesList.length},setUserId:function(e,t){e.userId=t}},Qe={getAllParksAction:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,He.getParksList();case 4:n=t.sent,r("initializeParks",n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),r("setOnError");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},getTrailsFromParkAction:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,He.getTrailsFromPark(t.id);case 4:a=r.sent,n("initializeTrails",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setOnError");case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},getTrailSegmentsAction:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.commit,n=[],t.prev=2,a=Object($e["a"])(Je.selectedTrail.segments),t.prev=4,a.s();case 6:if((i=a.n()).done){t.next=14;break}return s=i.value,t.next=10,He.getTrailSegment(s);case 10:o=t.sent,n.push(o);case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](4),a.e(t.t0);case 19:return t.prev=19,a.f(),t.finish(19);case 22:r("setSegments",n),t.next=29;break;case 25:t.prev=25,t.t1=t["catch"](2),r("setOnError"),console.log(t.t1);case 29:case"end":return t.stop()}}),t,null,[[2,25],[4,16,19,22]])})))()},getTrailLikesAction:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,He.getTrailLikes(Je.selectedTrail.id);case 4:n=t.sent,r("setLikesList",n),r("setLikesCount",n),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),r("setOnError"),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},postTrailLikesAction:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,He.postTrailLike(Je.selectedTrail.id,Je.userId);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](1),r("setOnError"),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()},deleteTrailLikeAction:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,He.getTrailLikes(Je.selectedTrail.id);case 4:n=t.sent,a=Object($e["a"])(n),t.prev=6,a.s();case 8:if((i=a.n()).done){t.next=15;break}if(s=i.value,s.userId!==Je.userId){t.next=13;break}return t.next=13,He.deleteTrailLike(s.id);case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](6),a.e(t.t0);case 20:return t.prev=20,a.f(),t.finish(20);case 23:t.next=29;break;case 25:t.prev=25,t.t1=t["catch"](1),r("setOnError"),console.log(t.t1);case 29:case"end":return t.stop()}}),t,null,[[1,25],[6,17,20,23]])})))()}},Ve={namespaced:!0,state:Je,actions:Qe,mutations:Ke,getters:Ge};n["default"].use(Y["a"]);var We=new Y["a"].Store({state:{},mutations:{},actions:{},modules:{authentication:we,profile:Se,trails:Ve}});n["default"].use(l["a"]);var Xe=[{path:"/",name:"Home",component:X},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}},{path:"/login",name:"Login",component:F},{path:"/register",name:"Register",component:K}],Ye=new l["a"]({mode:"history",base:"/tp3appweb/",routes:Xe});Ye.beforeEach((function(e,t,r){e.meta.requiresAuth&&!We.getters["authentication/isLoggedIn"]?r({name:"Login",query:{redirect:e.path}}):r()}));var Ze=Ye,et=r("d422"),tt=r("8472"),rt=(r("5f3e"),r("41cf"),{welcomeMessage:"Allo tout le monde !",install:function(e){e.prototype.$getUiText=function(e){return rt[e]}}}),nt=rt,at=(r("9a6e"),r("9b4d")),it=r.n(at);delete it.a.Icon.Default.prototype._getIconUrl,it.a.Icon.Default.mergeOptions({iconRetinaUrl:r("a741"),iconUrl:r("843f"),shadowUrl:r("9021")}),n["default"].use(et["a"]),n["default"].use(tt["a"]),n["default"].use(nt),n["default"].config.productionTip=!1,new n["default"]({router:Ze,store:We,render:function(e){return e(u)}}).$mount("#app")},"701e":function(e,t,r){},e3ca:function(e,t,r){"use strict";r("701e")}});
//# sourceMappingURL=app.f0852d04.js.map